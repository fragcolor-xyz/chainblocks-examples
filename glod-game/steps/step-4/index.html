
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../step-3/">
      
      
        <link rel="next" href="../step-5/">
      
      <link rel="icon" href="../../../assets/images/favicon.svg">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.17">
    
    
      
        <title>Step 4 - Shards examples</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ecc896b0.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Hind:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Hind";--md-code-font:"Fira Code"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#step-4" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Shards examples" class="md-header__button md-logo" aria-label="Shards examples" data-md-component="logo">
      
  <img src="../../../assets/images/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Shards examples
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Step 4
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="deep-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
            
              <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
              </label>
            
          
            
            
            
            <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="light-blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
            
              <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
              </label>
            
          
        </form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fragcolor-xyz/shards-examples/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link md-tabs__link--active">
        Glod game
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../snake/" class="md-tabs__link">
        Snake
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../yes-no-game/" class="md-tabs__link">
        Yes no game
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Shards examples" class="md-nav__button md-logo" aria-label="Shards examples" data-md-component="logo">
      
  <img src="../../../assets/images/logo.svg" alt="logo">

    </a>
    Shards examples
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fragcolor-xyz/shards-examples/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../">Glod game</a>
          
            <label for="__nav_2">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Glod game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../">Steps</a>
          
            <label for="__nav_2_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Steps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-1/" class="md-nav__link">
        Step 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-2/" class="md-nav__link">
        Step 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-3/" class="md-nav__link">
        Step 3
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Step 4
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Step 4
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#moving-the-character-with-button-inputs-overview" class="md-nav__link">
    Moving the Character with Button Inputs - Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-41" class="md-nav__link">
    Step 4.1
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-42" class="md-nav__link">
    Step 4.2
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-43" class="md-nav__link">
    Step 4.3
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-44" class="md-nav__link">
    Step 4.4
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-45" class="md-nav__link">
    Step 4.5
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-46" class="md-nav__link">
    Step 4.6
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recap" class="md-nav__link">
    Recap
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-5/" class="md-nav__link">
        Step 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-6/" class="md-nav__link">
        Step 6
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../step-7/" class="md-nav__link">
        Step 7
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../full-game/">Full game</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Full game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../snake/">Snake</a>
          
            <label for="__nav_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Snake
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../snake/steps/">Steps</a>
          
            <label for="__nav_3_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Steps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/steps/step-1/" class="md-nav__link">
        Step 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/steps/step-2/" class="md-nav__link">
        Step 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/steps/step-3/" class="md-nav__link">
        Step 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/steps/step-4/" class="md-nav__link">
        Step 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../snake/steps/step-5/" class="md-nav__link">
        Step 5
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../snake/full-game/">Full game</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3_4">
          <span class="md-nav__icon md-icon"></span>
          Full game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
      
      
        
          
            
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../yes-no-game/">Yes no game</a>
          
            <label for="__nav_4">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Yes no game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
      
      
        
          
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../yes-no-game/steps/">Steps</a>
          
            <label for="__nav_4_3">
              <span class="md-nav__icon md-icon"></span>
            </label>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Steps
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-1/" class="md-nav__link">
        Step 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-2/" class="md-nav__link">
        Step 2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-3/" class="md-nav__link">
        Step 3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-4/" class="md-nav__link">
        Step 4
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-5/" class="md-nav__link">
        Step 5
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../yes-no-game/steps/step-6/" class="md-nav__link">
        Step 6
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
        
      
      <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
      
      
        
          
            
          
        
      
      
        
        
        <div class="md-nav__link md-nav__link--index ">
          <a href="../../../yes-no-game/full-game/">Full game</a>
          
        </div>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Full game
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="step-4">Step 4<a class="headerlink" href="#step-4" title="Permanent link">&para;</a></h1>
<h2 id="moving-the-character-with-button-inputs-overview">Moving the Character with Button Inputs - Overview<a class="headerlink" href="#moving-the-character-with-button-inputs-overview" title="Permanent link">&para;</a></h2>
<p>In the previous chapter, we breathed some life into Glod and transformed him from a static image into a fully animated character.</p>
<p>Amazing!</p>
<p>However, we can take things further. Let's free Glod from his stationary curse and make him move! To do this we will:</p>
<ol>
<li>Place a variable in the <code>Position</code> tag of <code>UI.Area</code>.</li>
<li>Change this variable to make Glod move.</li>
<li>Use velocity and acceleration concepts to make Glod jump.</li>
</ol>
<h2 id="step-41">Step 4.1<a class="headerlink" href="#step-41" title="Permanent link">&para;</a></h2>
<p>First, let's edit our code a little. Currently, Glod is situated in the center of the screen. While this can work, we can instead change his current <code>Anchor.Center</code> to <code>Anchor.Top</code>, and bring him down to Earth by changing his position. We achieve this by creating some variables.</p>
<details>
<summary><img alt="💡" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4a1.svg" title=":bulb:" /></summary>
<p>While any anchor will work as long as we change the position accordingly, we will be using <code>Anchor.Top</code> to keep things consistent and manage the positions of the different game elements more effectively.</p>
</details>
<p>Create the <code>.x</code> and <code>.y</code> variables which will be used to create the variable <code>.character-position</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added under <code>initialize-character</code>, at line 14.</li>
</ol>
</div>
</div>
</div>
<p><code>.character-position</code> is then fed into the <code>Position</code> parameter of the <code>UI.Area</code> shard. When the <code>.x</code> and <code>.y</code> values are changed, the <code>UI.Area</code> will move and hence move our character.</p>
<p>Remember to change the <code>Anchor</code> to <code>Anchor.Top</code>!</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Code Added</label><label for="__tabbed_2_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w"> </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w"> </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w"> </span><span class="ss">:Contents</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Code edited at line 138.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nb">-&gt; </span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="step-42">Step 4.2<a class="headerlink" href="#step-42" title="Permanent link">&para;</a></h2>
<p>Now that our variables are set up, it's time to make Glod move! Let's start by moving him to the left and right.</p>
<p>To do this, we simply have to change the <code>.x</code> value that we have just created whenever the left and right buttons are pressed.</p>
<p>First, create a new variable named <code>.character-x-velocity</code>. We will change this value when the right and left directional buttons are pressed to make our character move.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to <code>initialize-character</code> at line 17.</li>
</ol>
</div>
</div>
</div>
<p>Create the <code>run-logic</code> shard. When <code>.character-x-velocity</code> is changed, it will be added to <code>.x</code> and <code>.character-position</code> will be updated accordingly.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 83.</li>
</ol>
</div>
</div>
</div>
<p>Update the value of <code>.character-x-velocity</code> whenever the left or right directional buttons are pressed. Remember to reset the value back to 0 when the buttons are released. If not, Glod will move to the left or right forever.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Code Added</label><label for="__tabbed_5_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nb">-&gt; </span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Updated within the <code>button-inputs</code> shard at line 90.</li>
</ol>
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><code>run-logic</code> is added to the <code>main-wire</code> at line 134.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span><span class="p">)</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nb">-&gt; </span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="step-43">Step 4.3<a class="headerlink" href="#step-43" title="Permanent link">&para;</a></h2>
<p>Oh no! We now have a problem. 🥲</p>
<p>If we continue moving Glod left or right, you might notice that he goes off-screen.</p>
<p>Let's set up a boundary to ensure that Glod does not fall off the edge and into the abyss. To do this, create a clamp function that limits how far our x value can go.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:1"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">;; ---------- Character Boundary ------------ ;; (1)</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<ol>
<li>Added to line 82.</li>
</ol>
<p>This clamp function takes in a value and makes sure that it does not exceed the minimum and maximum values.</p>
<p>Call our <code>clamp</code> function in <code>run-logic</code> and set the <code>var</code> parameter to be <code>.x</code>, the <code>min</code> parameter to be -600, and the <code>max</code> parameter to be 600. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>You can change the <code>min</code> and <code>max</code> parameters to fit your screen accordingly.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Code Added</label><label for="__tabbed_7_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">)</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 93.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nb">-&gt; </span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Yay! Now Glod will not walk off into the void! 😙</p>
<h2 id="step-44">Step 4.4<a class="headerlink" href="#step-44" title="Permanent link">&para;</a></h2>
<p>Now, let's make Glod jump!</p>
<p>Instead of just using velocity, we can add acceleration into the mix. This will make Glod's jump feel more amazing.</p>
<details>
<summary>Jumping using Velocity &amp; Acceleration</summary>
<p>For smooth realistic jumping, we have to decrease velocity by acceleration whenever we jump. Decreasing velocity by acceleration decreases the rate of increase of <code>.y</code>.</p>
<p>This simulates gravity, making our jump feel more realistic.</p>
</details>
<p>First, create the variables that we will use.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:1"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to lines 18 and 19.</li>
</ol>
</div>
</div>
</div>
<p>Similar to <code>run-logic</code>, we will add <code>.character-y-velocity</code> to our <code>.y</code> variable. This time however, we will also add .<code>character-y-acceleration</code> to <code>.character-y-velocity</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:1"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span>
<span class="normal">9</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 98.</li>
</ol>
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 160 in <code>main-wire</code>.</li>
</ol>
</div>
</div>
</div>
<p>Lastly we modify the value of <code>.character-y-velocity</code> and <code>.character-y-acceleration</code> whenever the Up directional button is pressed.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Code Added</label><label for="__tabbed_10_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">  </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">  </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">            </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">            </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
1. Added to line 140 in <code>button-inputs</code>.</p>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span><span class="p">)</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">    </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details>
<summary><img alt="💡" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4a1.svg" title=":bulb:" /></summary>
<p>Since our <code>Anchor</code> is set to <code>Anchor.Top</code>, it places the <code>UI.Area</code> at the top and in the middle of the screen. This is now our origin at (0,0).</p>
<p>In Shards, increasing the value of the y-axis pushes our <code>UI.Area</code> down while decreasing it pushes it up.</p>
<p>This is why our velocity is a negative value. When added to our <code>.y</code> value, it decreases <code>.y</code> and makes our image move upwards.</p>
<p>Similarly, our acceleration is a positive value so that when it gets added to our negative value velocity, it decreases it.</p>
</details>
<h2 id="step-45">Step 4.5<a class="headerlink" href="#step-45" title="Permanent link">&para;</a></h2>
<p>Try running your code now! </p>
<p>Oh no, we have a problem. Glod falls through the floor! 😨</p>
<p>Don't worry, we can fix this!</p>
<p>Similar to how we made a boundary to ensure that Glod does not walk off-screen, we can add a boundary to ensure he doesn't fall through the floor by reusing the same <code>clamp</code> function we made in the previous step.</p>
<p>First, call our <code>clamp</code> function in <code>gravity-logic</code> with <code>.y</code> as our <code>var</code>, -620 as our <code>min</code>, and 620 as our <code>max</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:1"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.y</span><span class="w"> </span><span class="mf">-620.0</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to lines 107.</li>
</ol>
</div>
</div>
</div>
<p>Next, add a conditional statement to ensure that our y velocity and acceleration reverts back to 0 when Glod is on the ground.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Code Added</label><label for="__tabbed_12_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">.y</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="p">(</span><span class="nf">When</span>
<span class="w"> </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w"> </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">          </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">          </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 108.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.y</span><span class="w"> </span><span class="mf">-620.0</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span><span class="p">)))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">    </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>Congratulations! Glod can now move and jump safely! 😊</p>
<h2 id="step-46">Step 4.6<a class="headerlink" href="#step-46" title="Permanent link">&para;</a></h2>
<p>Finally, let's polish up the code a little.</p>
<p>You might have noticed other small problems: </p>
<ol>
<li>Glod does not go back to his idle animation when he lands on the floor.</li>
<li>Glod changes to his running animation if we move left and right while jumping.</li>
<li>Glod can continuously jump as long as you press the jump button.</li>
</ol>
<p>Let's fix these problems!</p>
<p>For the first issue, we simply have to ensure that Glod goes back to his idle animation when he reaches the floor.</p>
<p>In <code>gravity-logic</code>, revert <code>character-state</code> to 0 when the character is jumping.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Code Added</label><label for="__tabbed_13_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="w">  </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span>
<span class="w">            </span><span class="nv">.character-state</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">            </span><span class="p">(</span><span class="nf">When</span>
<span class="w">             </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">             </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">                      </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 114, under <code>gravity-logic</code>.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.y</span><span class="w"> </span><span class="mf">-620.0</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span>
<span class="w">            </span><span class="nv">.character-state</span>
<span class="w">            </span><span class="p">(</span><span class="nf">When</span>
<span class="w">             </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">             </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">                      </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">)))))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">    </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<details>
<summary><img alt="💡" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@14.1.2/assets/svg/1f4a1.svg" title=":bulb:" /></summary>
<p>Here, we use a nested <code>When</code> conditional statement to ensure that Glod goes back to his idle animation only when he is jumping.</p>
<p>Had we simply put <code>0 &gt;. character-state</code> without the nested <code>When</code>, this would revert Glod back to his idle animation but it would cause another problem. That is, Glod will forever be in his idle animation whenever he is on the ground. This means that he will never transit into his walking animation.</p>
<p>This is why we use the nested <code>When</code> conditional statement instead.</p>
</details>
<p>The second problem is also an easy fix. We simply put a <code>When</code> conditional statement to make Glod go into his walking animation when he is idling (<code>.character-state</code> is 0) and not jumping.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="14:2"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Code Added</label><label for="__tabbed_14_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w"> </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w"> </span><span class="ss">:Action</span>
<span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.character-state</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">  </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w"> </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w"> </span><span class="ss">:Action</span>
<span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">  </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">  </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Edited from line 127 onwards.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.y</span><span class="w"> </span><span class="mf">-620.0</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span>
<span class="w">            </span><span class="nv">.character-state</span>
<span class="w">            </span><span class="p">(</span><span class="nf">When</span>
<span class="w">             </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">             </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">                      </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">)))))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="p">(</span><span class="nf">When</span>
<span class="w">     </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">     </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="p">(</span><span class="nf">When</span>
<span class="w">     </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">     </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">    </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<p>For the last problem, although slightly more complicated, we will employ the <code>When</code> conditional statement too to solve it.</p>
<p>First, create a <code>.can-jump</code> variable under <code>initialize-character</code>.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="15:1"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">true</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.can-jump</span><span class="w"> </span><span class="c1">;; (1)</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Added to line 13.</li>
</ol>
</div>
</div>
</div>
<p>Set it such that Glod cannot jump again when he is jumping. When the jump button is pressed, <code>.can-jump</code> becomes false.</p>
<p>The increase in velocity and acceleration to make Glod jump only happens when <code>.can-jump</code> is true.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="16:1"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Code Added</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w"> </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w"> </span><span class="ss">:Action</span>
<span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="nv">.can-jump</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="nv">true</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span>
<span class="w">            </span><span class="nv">false</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.can-jump</span><span class="p">))))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Edited from line 153 onwards.</li>
</ol>
</div>
</div>
</div>
<p>Lastly we reset <code>.can-jump</code> back to true when Glod touches the floor again.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="17:2"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Code Added</label><label for="__tabbed_17_2">Full Code So Far</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nv">.y</span>
<span class="p">(</span><span class="nf">When</span>
<span class="w"> </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w"> </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">          </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">          </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span>
<span class="w">          </span><span class="nv">true</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.can-jump</span><span class="w"> </span><span class="c1">;; (1)</span>
<span class="w">          </span><span class="nv">.character-state</span>
<span class="w">          </span><span class="p">(</span><span class="nf">When</span>
<span class="w">           </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">           </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">                    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))))</span>
</code></pre></div></td></tr></table></div>
<ol>
<li>Edited from line 115 onwards.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="annotate highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">load-texture</span><span class="w"> </span><span class="p">[</span><span class="nv">name</span><span class="p">]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadImage</span><span class="w"> </span><span class="nv">name</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">GFX.Texture</span><span class="p">))</span>

<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">initialize-character</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Left.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-left</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Right.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-right</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character1_Jumping.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.character-jumping</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-state</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-direction</span><span class="w"> </span><span class="c1">;; 0 = facing left, 1 = facing right</span>
<span class="w">  </span><span class="nv">true</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.can-jump</span>

<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.x</span>
<span class="w">  </span><span class="mf">310.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-position</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-x-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-velocity</span>
<span class="w">  </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.character-y-acceleration</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Left)----------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Left/Character1_Idle_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-left-image-array</span>

<span class="w">  </span><span class="c1">;; ---------- Character Idle Array (Facing Right) ----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Idle/Idle_Right/Character1_Idle_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.idle-right-image-array</span>

<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.idle-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-image-index-max</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.idle-animation-speed</span>

<span class="w">  </span><span class="c1">;; -------------- Walking Array (Facing Left) -----------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Left/Character1_Walking_Left_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-left-image-array</span>

<span class="w">  </span><span class="c1">;; ----------- Walking Array (Facing Right) ---------------</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_1.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_2.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_3.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_4.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_5.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_6.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>
<span class="w">  </span><span class="p">(</span><span class="nf">LoadTexture</span><span class="w"> </span><span class="s">&quot;GlodImages/Character_Walking/Walking_Right/Character1_Walking_Right_7.png&quot;</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.walking-right-image-array</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Count</span><span class="w"> </span><span class="nv">.walking-left-image-array</span><span class="p">)</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-image-index-max</span>
<span class="w">  </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="mf">0.08</span><span class="w"> </span><span class="nb">= </span><span class="nv">.walking-animation-speed</span><span class="w"> </span><span class="c1">;; Reduce number to increase animation speed</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">;; --------- Idle Animation Loop ---------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">idle-animation</span>
<span class="w">  </span><span class="nv">.idle-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.idle-image-index-max</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.idle-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.idle-animation-speed</span><span class="p">))</span>

<span class="c1">;; -------- Walking Animation Loop --------</span>
<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">walking-animation</span>
<span class="w">  </span><span class="nv">.walking-image-index</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="nv">.walking-image-index-max</span><span class="p">)</span><span class="w"> </span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.walking-image-index</span><span class="p">))</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Pause</span><span class="w"> </span><span class="nv">.walking-animation-speed</span><span class="p">))</span>

<span class="c1">;; ---------- Character Boundary ------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">clamp</span><span class="w"> </span><span class="p">[</span><span class="k">var </span><span class="nb">min </span><span class="nv">max</span><span class="p">]</span>
<span class="w">  </span><span class="k">var </span><span class="p">(</span><span class="nf">Max</span><span class="w"> </span><span class="nv">min</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">Min</span><span class="w"> </span><span class="nv">max</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">var</span><span class="p">)</span>

<span class="c1">;; ------------ Character Run Logic ----------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">run-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.x</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-x-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.x</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.X</span><span class="w"> </span><span class="mf">-600.0</span><span class="w"> </span><span class="mf">600.0</span><span class="p">))</span>

<span class="c1">;; ------------ Character Gravity Logic ---------------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">gravity-logic</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="nv">.y</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-velocity</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.y</span>

<span class="w">  </span><span class="nv">.character-y-velocity</span><span class="w"> </span><span class="p">(</span><span class="nf">Math.Add</span><span class="w"> </span><span class="nv">.character-y-acceleration</span><span class="p">)</span>
<span class="w">  </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>

<span class="w">  </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="nv">.x</span><span class="w"> </span><span class="nv">.y</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-position</span>

<span class="w">  </span><span class="p">(</span><span class="nf">clamp</span><span class="w"> </span><span class="nv">.y</span><span class="w"> </span><span class="mf">-620.0</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">  </span><span class="nv">.y</span>
<span class="w">  </span><span class="p">(</span><span class="nf">When</span>
<span class="w">   </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">IsMoreEqual</span><span class="w"> </span><span class="mf">620.0</span><span class="p">)</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">            </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-acceleration</span>
<span class="w">            </span><span class="nv">true</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.can-jump</span>
<span class="w">            </span><span class="nv">.character-state</span>
<span class="w">            </span><span class="p">(</span><span class="nf">When</span>
<span class="w">             </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">3</span><span class="p">)</span>
<span class="w">             </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">                      </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">)))))</span>

<span class="c1">;; ------- Button Inputs ----------</span>
<span class="p">(</span><span class="nf">defshards</span><span class="w"> </span><span class="nv">button-inputs</span><span class="w"> </span><span class="p">[]</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;left&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="p">(</span><span class="nf">When</span>
<span class="w">     </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">     </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">-5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;right&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="p">(</span><span class="nf">When</span>
<span class="w">     </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">     </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="mi">2</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span><span class="p">))</span>
<span class="w">    </span><span class="mi">1</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-direction</span>
<span class="w">    </span><span class="mf">5.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyDown</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;up&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Msg</span><span class="w"> </span><span class="s">&quot;up&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="mi">3</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="nv">.can-jump</span>
<span class="w">    </span><span class="p">(</span><span class="nf">When</span>
<span class="w">     </span><span class="ss">:Predicate</span><span class="w"> </span><span class="p">(</span><span class="nf">Is</span><span class="w"> </span><span class="nv">true</span><span class="p">)</span>
<span class="w">     </span><span class="ss">:Action</span><span class="w"> </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">              </span><span class="mf">-20.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-y-velocity</span>
<span class="w">              </span><span class="mf">1.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="w"> </span><span class="nv">.character-y-acceleration</span>
<span class="w">              </span><span class="nv">false</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.can-jump</span><span class="p">))))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;left&quot;</span>
<span class="w">   </span><span class="ss">:Action</span><span class="w"> </span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Inputs.KeyUp</span>
<span class="w">   </span><span class="ss">:Key</span><span class="w"> </span><span class="s">&quot;right&quot;</span>
<span class="w">   </span><span class="ss">:Action</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="mi">0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-state</span>
<span class="w">    </span><span class="mf">0.0</span><span class="w"> </span><span class="nb">&gt; </span><span class="nv">.character-x-velocity</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">defloop</span><span class="w"> </span><span class="nv">main-wire</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">   </span><span class="p">(</span><span class="nf">initialize-character</span><span class="p">))</span>

<span class="w">  </span><span class="p">(</span><span class="nf">run-logic</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">gravity-logic</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">idle-animation</span><span class="p">)</span>
<span class="w">  </span><span class="p">(</span><span class="nf">Step</span><span class="w"> </span><span class="nv">walking-animation</span><span class="p">)</span>

<span class="w">  </span><span class="p">(</span><span class="nf">GFX.MainWindow</span>
<span class="w">   </span><span class="ss">:Title</span><span class="w"> </span><span class="s">&quot;MainWindow&quot;</span><span class="w"> </span><span class="ss">:Width</span><span class="w"> </span><span class="mi">1920</span><span class="w"> </span><span class="ss">:Height</span><span class="w"> </span><span class="mi">1080</span>
<span class="w">   </span><span class="ss">:Contents</span>
<span class="w">   </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">    </span><span class="p">(</span><span class="nf">Setup</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.DrawQueue</span><span class="p">)</span><span class="w"> </span><span class="nb">&gt;= </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">GFX.UIPass</span><span class="w"> </span><span class="nv">.ui-draw-queue</span><span class="p">)</span><span class="w"> </span><span class="nv">&gt;&gt;</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>
<span class="w">    </span><span class="nv">.ui-draw-queue</span><span class="w"> </span><span class="p">(</span><span class="nf">GFX.ClearQueue</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">UI</span>
<span class="w">     </span><span class="nv">.ui-draw-queue</span>
<span class="w">     </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">      </span><span class="p">(</span><span class="nf">UI.Area</span>
<span class="w">       </span><span class="ss">:Position</span><span class="w"> </span><span class="nv">.character-position</span>
<span class="w">       </span><span class="ss">:Anchor</span><span class="w"> </span><span class="nv">Anchor.Top</span>
<span class="w">       </span><span class="ss">:Contents</span>
<span class="w">       </span><span class="p">(</span><span class="nf">-&gt;</span>
<span class="w">        </span><span class="nv">.character-state</span>
<span class="w">        </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-direction</span>
<span class="w">                      </span><span class="p">(</span><span class="nf">Match</span><span class="w"> </span><span class="p">[</span><span class="mi">0</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                              </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.idle-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.idle-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">                             </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">))</span>
<span class="w">                </span><span class="mi">1</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-left-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">2</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.walking-right-image-array</span><span class="w"> </span><span class="p">(</span><span class="nf">Take</span><span class="w"> </span><span class="nv">.walking-image-index</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))</span>
<span class="w">                </span><span class="mi">3</span><span class="w"> </span><span class="p">(</span><span class="nb">-&gt; </span><span class="nv">.character-jumping</span><span class="w"> </span><span class="p">(</span><span class="nf">UI.Image</span><span class="w"> </span><span class="ss">:Scale</span><span class="w"> </span><span class="p">(</span><span class="nf">float2</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)))]</span>
<span class="w">               </span><span class="ss">:Passthrough</span><span class="w"> </span><span class="nv">false</span><span class="p">)))))</span>

<span class="w">    </span><span class="p">(</span><span class="nf">GFX.Render</span><span class="w"> </span><span class="ss">:Steps</span><span class="w"> </span><span class="nv">.render-steps</span><span class="p">)</span>

<span class="w">    </span><span class="p">(</span><span class="nf">button-inputs</span><span class="p">))))</span>

<span class="p">(</span><span class="nf">defmesh</span><span class="w"> </span><span class="nv">main</span><span class="p">)</span>
<span class="p">(</span><span class="nf">schedule</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="nv">main-wire</span><span class="p">)</span>
<span class="p">(</span><span class="nf">run</span><span class="w"> </span><span class="nv">main</span><span class="w"> </span><span class="p">(</span><span class="nb">/ </span><span class="mf">1.0</span><span class="w"> </span><span class="mi">60</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
</div>
</div>
</div>
<h2 id="recap">Recap<a class="headerlink" href="#recap" title="Permanent link">&para;</a></h2>
<p>Try running your code now! Glod should be happily running and jumping without any glitches. 😁</p>
<p>To recap:</p>
<ol>
<li>
<p>We made Glod move by tying a variable to the <code>UI.Area</code> position and changing said variable.</p>
</li>
<li>
<p>We ensured that Glod does not walk or fall into the void by creating boundaries.</p>
</li>
<li>
<p>We created conditional statements to fix several problems.</p>
</li>
</ol>
<p>And walah! We now have a fully functional moving character!</p>
<p>In the next chapter, let's have Glod collect some coins! 🤑</p>





                
              </article>
            </div>
          
          
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../step-3/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Step 3" rel="prev">
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Step 3
              </div>
            </div>
          </a>
        
        
          
          <a href="../step-5/" class="md-footer__link md-footer__link--next" aria-label="Next: Step 5" rel="next">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Step 5
              </div>
            </div>
            <div class="md-footer__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2021 Fragcolor Pte. Ltd.
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/fragcolor-xyz" target="_blank" rel="noopener" title="Fragcolor is on GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://discord.gg/c7mjxvYqd3" target="_blank" rel="noopener" title="Join us on Discord" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/fragcolor" target="_blank" rel="noopener" title="Follow us on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://www.linkedin.com/company/fragcolor/" target="_blank" rel="noopener" title="Company profile on LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.suggest", "toc.integrate"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b425cdc4.min.js"></script>
      
    
  </body>
</html>